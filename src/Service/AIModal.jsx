import { GoogleGenerativeAI } from "@google/generative-ai";
  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };

export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget , Give me a Hotels options list with HotelName, Hotel address, Price, hotel image Url, geo coordinates , rating, descriptions, and suggest itineraries with placeName, placeDetails, Place image url, Geo Coordinates, ticket Pricing, rating, Time for each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a detailed travel plan for a couple visiting Las Vegas on a budget for 3 days, presented in JSON format, along with hotel options and itinerary details:\n\n```json\n{\n  \"tripName\": \"Las Vegas on a Budget: 3-Day Getaway for Couples\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"duration\": \"3 Days\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n       \"price\": \"$40 - $80 per night\",\n      \"hotelImageUrl\": \"https://www.circuscircus.com/wp-content/uploads/2019/07/Circus_Hero.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1233,\n        \"longitude\": -115.1692\n      },\n       \"rating\": 3.8,\n        \"description\": \"A classic Las Vegas experience with affordable rooms, a midway, and free circus acts. Good for budget travelers.\"\n    },\n     {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$50 - $90 per night\",\n      \"hotelImageUrl\": \"https://www.vegas.com/wp-content/uploads/2020/07/Excalibur_Exterior_Night_1200x630-1.jpg\",\n       \"geoCoordinates\": {\n        \"latitude\": 36.0959,\n        \"longitude\": -115.1742\n      },\n       \"rating\": 4.0,\n        \"description\": \"A castle-themed hotel with medieval decor. Affordable with many dining and entertainment options.\"\n    },\n    {\n      \"hotelName\": \"Flamingo Las Vegas Hotel & Casino\",\n      \"hotelAddress\": \"3555 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$60 - $100 per night\",\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/27/75/33/4c/flamingo-las-vegas.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1163,\n        \"longitude\": -115.1714\n      },\n       \"rating\": 4.1,\n       \"description\": \"Iconic hotel on the Strip with a vibrant atmosphere and a wildlife habitat. Generally affordable.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip and Free Attractions\",\n      \"bestTimeToVisit\": \"Morning and Evening\",\n      \"plan\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"An iconic landmark, perfect for photos. Visit in the early morning or at dusk to avoid crowds and the heat.\",\n           \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Welcome_to_Las_Vegas_sign_20180604.jpg/1200px-Welcome_to_Las_Vegas_sign_20180604.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.0828,\n            \"longitude\": -115.1701\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n           \"timeTravel\": \"15-20 min cab from Strip\"\n\n        },\n         {\n          \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"placeDetails\": \"Beautiful indoor gardens that change with the seasons. It's free to visit and offers stunning visuals.\",\n          \"placeImageUrl\":\"https://bellagio.mgmresorts.com/content/dam/MGM/bellagio/hotel/conservatory-botanical-gardens/2023/winter/2023-winter-main-v1.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1726\n          },\n          \"ticketPricing\": \"Free\",\n           \"rating\": 4.7,\n            \"timeTravel\":\"10 min walk from the Las Vegas sign\"\n        },\n         {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Watch the spectacular water show set to music. Shows run every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n            \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Bellagio_Fountains_%282818706634%29.jpg/1200px-Bellagio_Fountains_%282818706634%29.jpg\",\n            \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1737\n          },\n          \"ticketPricing\": \"Free\",\n           \"rating\": 4.8,\n           \"timeTravel\":\"Close to Bellagio Conservatory\"\n        },\n           {\n          \"placeName\": \"Explore The LINQ Promenade\",\n          \"placeDetails\": \"An outdoor shopping, dining, and entertainment district with free live music and street performers. Enjoy people watching and window shopping.\",\n          \"placeImageUrl\":\"https://www.caesars.com/linq/things-to-do/linq-promenade/-/media/linq/images/things-to-do/promenade/linq-promenade-homepage-new.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.1169,\n            \"longitude\": -115.1712\n          },\n           \"ticketPricing\":\"Free\",\n            \"rating\":4.4,\n             \"timeTravel\":\"5 min walk from Bellagio Fountains\"\n        },\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a light show on the overhead canopy. A must-see for the vibrant atmosphere.\",\n            \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/17/98/91/ef/fremont-street-experience.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1702,\n            \"longitude\": -115.1411\n          },\n          \"ticketPricing\": \"Free (some attractions inside may have fees)\",\n           \"rating\": 4.5,\n            \"timeTravel\":\"20-25 min cab from Strip\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Culture, Nature, and Budget-Friendly Activities\",\n      \"bestTimeToVisit\": \"Morning and late afternoon\",\n      \"plan\": [\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"Scenic drive or hike through stunning red rock formations. Great for couples who enjoy nature.\",\n          \"placeImageUrl\":\"https://www.redrockcanyonlv.org/wp-content/uploads/2022/09/Red-Rock-Canyon-Hero-Image.jpeg\",\n             \"geoCoordinates\": {\n            \"latitude\": 36.1391,\n            \"longitude\": -115.4138\n          },\n          \"ticketPricing\": \"$15 per vehicle\",\n           \"rating\": 4.7,\n            \"timeTravel\":\"20 min cab from Strip\"\n        },\n          {\n          \"placeName\": \"The Neon Museum\",\n          \"placeDetails\":\"A graveyard of old Las Vegas signs, offering unique photo opportunities. Book tickets in advance for best pricing. Outdoor museum, so check the weather.\",\n          \"placeImageUrl\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/51/73/40/neon-museum.jpg?w=700&h=-1&s=1\",\n             \"geoCoordinates\": {\n            \"latitude\": 36.1716,\n            \"longitude\": -115.1448\n          },\n          \"ticketPricing\":\"$20-$30\",\n          \"rating\": 4.6,\n           \"timeTravel\":\"20 min cab from Red Rock Canyon\"\n        },\n         {\n          \"placeName\": \"High Roller Observation Wheel at The LINQ\",\n          \"placeDetails\": \"Take a ride on the High Roller for panoramic views of Las Vegas.\",\n           \"placeImageUrl\": \"https://res.cloudinary.com/simpleview/image/upload/v1688754451/clients/lasvegas/high_roller_f5f83461_f7bb_41e9_a9b4_d69a463ca695.jpg\",\n            \"geoCoordinates\": {\n             \"latitude\": 36.1169,\n            \"longitude\": -115.1711\n           },\n          \"ticketPricing\": \"$25-35\",\n          \"rating\": 4.5,\n            \"timeTravel\":\"10 min cab from Neon Museum\"\n        },\n        {\n            \"placeName\":\"Free Shows at various hotels\",\n           \"placeDetails\": \"Many hotels offer free shows such as the Fall of Atlantis at Caesars or the volcano show at The Mirage. Check show schedules online and plan your evening accordingly.\",\n           \"placeImageUrl\":\"https://media-cdn.tripadvisor.com/media/photo-m/1280/14/68/55/0c/fall-of-atlantis-show.jpg\",\n           \"geoCoordinates\":{\n             \"latitude\":36.1175,\n             \"longitude\":-115.1734\n          },\n           \"ticketPricing\":\"Free\",\n           \"rating\":4.4,\n          \"timeTravel\":\"Few minutes walk from High roller observation wheel\"\n\n        }\n\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"More Strip exploration & Departure\",\n      \"bestTimeToVisit\": \"Morning and early afternoon\",\n      \"plan\": [\n       {\n          \"placeName\": \"Paris Las Vegas Eiffel Tower Viewing Deck\",\n          \"placeDetails\": \"Enjoy views of the Strip from a replica of the Eiffel Tower.\",\n            \"placeImageUrl\":\"https://www.caesars.com/paris-las-vegas/things-to-do/eiffel-tower/-/media/paris/images/things-to-do/eiffel-tower-experience/eiffel-tower-experience-hero.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1093,\n            \"longitude\": -115.1708\n          },\n          \"ticketPricing\":\"$25-30\",\n           \"rating\": 4.4,\n           \"timeTravel\":\"10 min walk from the strip\"\n\n        },\n       {\n          \"placeName\": \"The Venetian Hotel & Grand Canal Shoppes\",\n          \"placeDetails\": \"Wander through the hotel's impressive architecture and take a free stroll through the shops. Watch the gondolas and enjoy the atmosphere.\",\n            \"placeImageUrl\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/07/19/c3/3b/grand-canal-shoppes-at.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1213,\n            \"longitude\": -115.1699\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n           \"timeTravel\":\"10 min walk from the Paris las vegas\"\n\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n           \"placeDetails\":\"Enjoy the iconic volcano show one last time on the strip.\",\n          \"placeImageUrl\": \"https://assets.simpleviewinc.com/simpleview/image/upload/c_limit,h_1200,q_75,w_1200/v1/clients/lasvegas/mirage_volcano_00b003b5_831c_4bb8_b073_f52e86f787ff.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.1225,\n            \"longitude\": -115.1720\n           },\n           \"ticketPricing\": \"Free\",\n           \"rating\": 4.6,\n           \"timeTravel\":\"10 min walk from the Venetian hotel\"\n          },\n           {\n              \"placeName\":\"Departure\",\n              \"placeDetails\":\"Head to the airport for your departure. Depending on flight time, you might have time for a quick lunch at an affordable eatery near your hotel.\",\n               \"placeImageUrl\":\"\",\n               \"geoCoordinates\": {\n                 \"latitude\": 0.0,\n                \"longitude\": 0.0\n              },\n              \"ticketPricing\": \"N/A\",\n              \"rating\": 0.0,\n              \"timeTravel\":\"20 mins Cab from The strip\"\n           }\n      ]\n    }\n  }\n}\n```\n**Key Budget Tips:**\n*   **Accommodation:** Look for hotels off the main strip or those offering weekday specials.\n*   **Food:** Take advantage of affordable fast-food options, food courts, or happy hour deals.\n*   **Transportation:** Walk when possible or use public transportation (The Deuce bus) instead of taxis/rideshares.\n*   **Free Activities:** Las Vegas offers a plethora of free attractions and shows, which can fill your itinerary without spending much.\n*   **Early Booking:** Especially for hotels and attractions with tickets, book in advance for better pricing.\n\nThis plan allows for flexibility. If you find something else youâ€™d like to do, feel free to adjust! Enjoy your budget-friendly trip to Las Vegas!\n"},
          ],
        },
      ],
    });
  